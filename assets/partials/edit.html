<div class="row">
	<div class="container">
		<div>
			<button class="pull-right btn btn-default btn-sm" ui-sref="event_edit({slug:event_data.slug})">Edit Event</button>
			<h1>{{event_data.title}}</h1>
		</div>
		<div>
			<p class="text-muted" style="padding-left:2px;margin-bottom: 0px">Created by {{event_data.owner}} on {{event_data.created_on | date:'mediumDate':'+0530'}}</p>
		</div>
		<hr style="margin-top: 0px">
	</div>
</div>
<div class="row">
	<div class="container">
		<div class="col-md-8">
			<h4 class="text-muted">The group spent {{event_data.currency}} <b class="text-primary">XXX</b> in total.</h4>
			<div class="row-fluid">
				<h3>How to settle all debts</h3>
				<ul class="list-group">
				  <li class="list-group-item" ng-repeat="settlement in settlements">{{settlement.from.name}} gives {{event_data.currency}} <b>{{settlement.amount}}</b> to {{settlement.to.name}}</li>
				</ul>
			</div>
			<div class="table-responsive" style="width: 100%;overflow: auto;"> 
				<table class="table table-striped text-center">
					<thead>
						<tr style="font-weight: 900;">
							<td></td>
							<td ng-repeat="buddy in event_data.members">{{buddy.name}}</td>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="expense in event_data.expenses">
							<td style="font-weight: 900;">{{expense.name}}</td>
							<td ng-repeat="payer in expense.payers">{{payer.amount}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-md-4 panel-overview">
			<div class="row-fluid">
				<h3 style="font-variant: small-caps;">Buddies</h3>
				<ul>
					<li ng-repeat="member in event_data.members | orderBy:'name'" ng-if="member.name">{{member.name}}</li>
				</ul>
			</div>
			<div class="row-fluid">
				<div>
					<button class="pull-right btn btn-default btn-sm" ui-sref="expense_add({slug:event_data.slug})">Add Expense</button>
					<h3 style="font-variant: small-caps;">Expenses</h3>
				</div>
				<ul>
					<li ng-repeat="expense in event_data.expenses | orderBy:'created_on':true">
						<div class="row-fluid clearfix title">
							<div class="pull-right">
								<span><a href=""><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a></span>
								<span><a href="" ng-click="removeExpense(expense.id)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></span>
							</div>
							<h4>{{expense.name}}</h4>
						</div>
						<div class="row-fluid description">
							<p class="text-muted">
								Added by {{event_data.members[expense.added_by].name}} on {{expense.created_on | date:'short':'+0530'}}
								<br>
								Total amout : {{event_data.currency}} {{expense.tot_amount}}
							</p>
						</div>
						<div class="row-fluid details">
							<h5>Paid by</h5>
							<p class="text-muted" ng-repeat="payer in expense.payers" ng-if="payer.amount > 0">{{getNamebyId(event_data.members,payer.id)}} <span class="pull-right">{{event_data.currency}} {{payer.amount}}</span></p>
							<h5>Shared between</h5>
							<p class="text-muted"><span ng-repeat="payee in expense.payees | orderBy : 'name'">{{($index != expense.payees.length-1)?getNamebyId(event_data.members,payee.id)+', ':getNamebyId(event_data.members,payee.id)}} </span></p>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>	
</div>
